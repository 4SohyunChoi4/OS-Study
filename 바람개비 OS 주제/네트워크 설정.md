
# VMWare에서 새 NIC를 추가하기

> **NIC(Network Interface Card)** : 컴퓨터가 네트워크(유선, 무선 LAN)에 연결할 수 있도록 해주는 하드웨어
> Physical, Data Link 계층에서 작동, 데이터 패킷 흐름 제어


![[Pasted image 20250304164026.png]]




![[Pasted image 20250304163226.png]]
설정 > Add > Network Adapter

![[Pasted image 20250304163253.png]]



`[root@localhost ~]# ip link show`
`1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000`
    `link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00`
`2: ens160: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000`
    `link/ether 00:0c:29:ff:b3:09 brd ff:ff:ff:ff:ff:ff`
    `altname enp3s0`
`3: ens224: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000`
    `link/ether 00:0c:29:ff:b3:13 brd ff:ff:ff:ff:ff:ff`
    `altname enp19s0`

ens224가 생겼다.



## 새 NIC에 IP를 수동으로 할당하기

네트워크에는 스크립트 방식과 NetworkManager방식이 있다.
RHEL 7부터 기본 네트워크 관리 도구로 NetworkManager가 도입되었다.

### **ifcgf 파일을 직접 편집**


```
[root@localhost ~]# vi /etc/sysconfig/network-scripts/ifcfg-ens224
DEVICE=ens224
NAME=ens224
ONBOOT=yes
BOOTPROTO=none
IPADDR=192.168.38.129
PREFIX=24
GATEWAY=192.168.38.1
DNS1=8.8.8.8
DNS2=8.8.4.4
```
```
```

`[root@localhost ~]# vi /etc/sysconfig/network-scripts/ifcfg-ens224`


```
DEVICE=ens224
NAME=ens224
ONBOOT=yes
BOOTPROTO=none
IPADDR=192.168.38.129
PREFIX=24
GATEWAY=192.168.38.1
DNS1=8.8.8.8
DNS2=8.8.4.4
```

저장한다.

`[root@localhost ~]# systemctl restart NetworkManager`
`[root@localhost ~]# systemctl status NetworkManager`

`[root@localhost ~]# systemctl status NetworkManager`
`● NetworkManager.service - Network Manager`
   `Loaded: loaded (/usr/lib/systemd/system/NetworkManager.service; enabled; ven>`
   `Active: active (running) since Tue 2025-03-04 02:53:16 EST; 4s ago`
     `Docs: man:NetworkManager(8)`
 `Main PID: 21432 (NetworkManager)`
    `Tasks: 4 (limit: 10930)`
   `Memory: 3.3M`
   `CGroup: /system.slice/NetworkManager.service`
           `└─21432 /usr/sbin/NetworkManager --no-daemon`

`[root@localhost ~]# ip addr`
`1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000`
    `link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00`
    `inet 127.0.0.1/8 scope host lo`
       `valid_lft forever preferred_lft forever`
    `inet6 ::1/128 scope host`
       `valid_lft forever preferred_lft forever`
`2: ens160: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000`
    `link/ether 00:0c:29:ff:b3:09 brd ff:ff:ff:ff:ff:ff`
    `altname enp3s0`
    `inet 192.168.38.128/24 brd 192.168.38.255 scope global dynamic noprefixroute ens160`
       `valid_lft 1791sec preferred_lft 1791sec`
    `inet6 fe80::20c:29ff:feff:b309/64 scope link noprefixroute`
       `valid_lft forever preferred_lft forever`
`3: ens224: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000`
    `link/ether 00:0c:29:ff:b3:13 brd ff:ff:ff:ff:ff:ff`
    `altname enp19s0`
    `inet 192.168.38.129/24 brd 192.168.38.255 scope global noprefixroute ens224`
       `valid_lft forever preferred_lft forever`
    `inet6 fe80::20c:29ff:feff:b313/64 scope link`
       `valid_lft forever preferred_lft forever`

ens224의 IP 주소가 추가되었다.


### network-scripts/ifcfg 스크립트 상세 내용 알기

각 항목은 네트워크 인터페이스의 동작 방식과 IP 주소 등을 지정하는 역할을 한다.

```
vi /etc/sysconfig/network-scripts/ifcfg-ens224

DEVICE=ens224
NAME=ens224
ONBOOT=yes
BOOTPROTO=none
IPADDR=192.168.38.129
PREFIX=24
GATEWAY=192.168.38.1
DNS1=8.8.8.8
DNS2=8.8.4.4
```

==`DEVICE=ens224`==

이 구성 파일이 설정할 네트워크 인터페이스(장치)의 이름
NIC(Network Interface Card)의 이름

`ip a`, `nmcli` 로 인터페이스 이름을 확인할 수 있다.

```
[root@localhost ~]# ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: ens160: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 00:0c:29:05:23:46 brd ff:ff:ff:ff:ff:ff
    altname enp3s0
    inet 192.168.38.128/24 brd 192.168.38.255 scope global dynamic noprefixroute ens160
       valid_lft 1342sec preferred_lft 1342sec
    inet6 fe80::20c:29ff:fe05:2346/64 scope link noprefixroute
       valid_lft forever preferred_lft forever
       
[root@localhost ~]# nmcli device status
DEVICE  TYPE      STATE      CONNECTION
ens160  ethernet  connected  ens160
lo      loopback  unmanaged  --

```

==`NAME=ens224`==
네트워크 인터페이스의 논리적 이름 => NetworkManager에서 사용하는 인터페이스 이름
보통 DEVICE와 같은 값

```
[root@localhost ~]# nmcli device show ens160
GENERAL.DEVICE:                         ens160
GENERAL.TYPE:                           ethernet
GENERAL.HWADDR:                         00:0C:29:05:23:46
GENERAL.MTU:                            1500
GENERAL.STATE:                          100 (connected)
GENERAL.CONNECTION:                     ens160
GENERAL.CON-PATH:                       /org/freedesktop/NetworkManager/ActiveConnect>
WIRED-PROPERTIES.CARRIER:               on
IP4.ADDRESS[1]:                         192.168.38.128/24
IP4.GATEWAY:                            192.168.38.2
IP4.ROUTE[1]:                           dst = 0.0.0.0/0, nh = 192.168.38.2, mt = 100
IP4.ROUTE[2]:                           dst = 192.168.38.0/24, nh = 0.0.0.0, mt = 100
IP4.DNS[1]:                             192.168.38.2
IP4.DOMAIN[1]:                          localdomain
IP6.ADDRESS[1]:                         fe80::20c:29ff:fe05:2346/64
IP6.GATEWAY:                            --
IP6.ROUTE[1]:                           dst = fe80::/64, nh = ::, mt = 1024

```
==`ONBOOT=yes`===
시스템 부팅 시 이 네트워크 인터페이스르 자동으로 활성화할지 여부

`no` 시 수동으로 `ifup ens224` 해야됨.

->`ifup command not found`
`network-scripts` 패키지 설치 필요..

===`BOOTPROTO=none`==
네트워크 설정 방식(프로토콜)

* none : 정적 IP 수동 할당 (IPADDR 사용) -> IPADDR, GATEWAY를 직접 설정
* dhcp : DHCP 서버에서 자동 IP 할당
* bootp : BOOTP 프로토콜, 거의 사용 x


==`IPADDR=192.168.38.129'`==
정적 IP 주소
위에 BOOTPROTO를 none으로 했을 시에만 이 값이 적용된다.
```
[root@localhost ~]# ip a show ens160
2: ens160: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 00:0c:29:05:23:46 brd ff:ff:ff:ff:ff:ff
    altname enp3s0
    inet 192.168.38.128/24 brd 192.168.38.255 scope global dynamic noprefixroute ens160
       valid_lft 958sec preferred_lft 958sec
    inet6 fe80::20c:29ff:fe05:2346/64 scope link noprefixroute
       valid_lft forever preferred_lft forever

```

==`PREFIX=24`==
서브넷 마스크를 CIDR 형식으로 표기한 값
.1 ~ .254


==`GATEWAY=192.168.38.1`==
GW의 IP
이 인터페이스에서 외부 네트워크로 나갈 때의 경로

```
[root@localhost ~]# ip route show default
default via 192.168.38.2 dev ens160 proto dhcp src 192.168.38.128 metric 100

```

==`DNS1=8.8.8.8`==
==`DNS2=8.8.4.4`==
DNS 주소 설정
각각 기본, 보조


#### /etc/resolv.conf

DNS 서버 정보를 담고 있는 설정 파일
NetworkManager나 systemd-resolved 같은 도구가 이 파일의 내용을 자동으로 업데이트한다.

내가 이 파일을 수정해도 NetworkManager나 systemd-resolved 같은 네트워크 관리 도구가 이 파일을 자동으로 생성하거나 업데이트하도록 설정되어 있다면 내가 바꿔도 돌아와 진다.

```
[root@localhost ~]# cat /etc/resolv.conf
# Generated by NetworkManager
search localdomain
nameserver 192.168.38.2

```

여기 작성된 nameserver는 IP 주소 변환 시 참고하는 DNS 서버의 IP이다. 
8.8.8.8 
8.8.4.4 둘다 구글의 DNS 서버이다.


```

[root@localhost ~]# ip addr
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: ens160: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 00:0c:29:05:23:46 brd ff:ff:ff:ff:ff:ff
    altname enp3s0
    inet 192.168.38.128/24 brd 192.168.38.255 scope global dynamic noprefixroute ens160
       valid_lft 1517sec preferred_lft 1517sec
    inet6 fe80::20c:29ff:fe05:2346/64 scope link noprefixroute
       valid_lft forever preferred_lft forever

```


### NetworkManager 툴(nmcli 사용)
`[root@localhost ~]# nmcli connection add type ethernet ifname ens224`
`Connection 'ethernet-ens224' (619e6491-be0c-4af3-ab13-974478877402) successfully added.`
`[root@localhost ~]# nmcli show connection`
`Error: argument 'show' not understood. Try passing --help instead.`
`[root@localhost ~]# nmcli show connections`
`Error: argument 'show' not understood. Try passing --help instead.`
`[root@localhost ~]# nmcli connection show`
`NAME             UUID                                  TYPE      DEVICE`
`ens160           347b24b9-2e12-41c5-88eb-81b755be70ef  ethernet  ens160`
`ethernet-ens224  619e6491-be0c-4af3-ab13-974478877402  ethernet  ens224`

ethernet-ens224 생성되었다.

`[root@localhost ~]# ip addr`
`1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000`
    `link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00`
    `inet 127.0.0.1/8 scope host lo`
       `valid_lft forever preferred_lft forever`
    `inet6 ::1/128 scope host`
       `valid_lft forever preferred_lft forever`
`2: ens160: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000`
    `link/ether 00:0c:29:ff:b3:09 brd ff:ff:ff:ff:ff:ff`
    `altname enp3s0`
    `inet 192.168.38.128/24 brd 192.168.38.255 scope global dynamic noprefixroute ens160`
       `valid_lft 1551sec preferred_lft 1551sec`
    `inet6 fe80::20c:29ff:feff:b309/64 scope link noprefixroute`
       `valid_lft forever preferred_lft forever`
`3: ens224: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000`
    `link/ether 00:0c:29:ff:b3:13 brd ff:ff:ff:ff:ff:ff`
    `altname enp19s0`
    `inet 192.168.38.129/24 brd 192.168.38.255 scope global dynamic noprefixroute ens224`
       `valid_lft 1739sec preferred_lft 1739sec`
    `inet6 fe80::34c9:fec9:32c2:ec06/64 scope link noprefixroute`
       `valid_lft forever preferred_lft forever`




#### NIC에 할당한 IP 삭제하는 방법

`[root@localhost ~]# rm -rf /etc/sysconfig/network-scripts/ifcfg-ens224` 
`[root@localhost ~]# systemctl restart NetworkManager`

이렇게 진행했을 때 삭제가 되지 않았다.

-> `ifcfg-ens224`를 지웠어도, NetworkManager 내부 DB(또는 `/etc/NetworkManager/system-connections/` 디렉토리)에 ens224용 프로파일이 남아 있으면 여전히 IP가 유지된다.

`[root@localhost ~]# nmcli connection show`
`NAME             UUID                                  TYPE      DEVICE`
`ens160           347b24b9-2e12-41c5-88eb-81b755be70ef  ethernet  ens160`
`ens224           6fa451af-4cf9-404c-802e-9c5428145f32  ethernet  ens224`

`[root@localhost ~]# nmcli 6fa451af-4cf9-404c-802e-9c5428145f32`
`Error: argument '6fa451af-4cf9-404c-802e-9c5428145f32' not understood. Try passing --help instead.`
`[root@localhost ~]# nmcli connection delete  6fa451af-4cf9-404c-802e-9c5428145f32`
`Connection 'ens224' (6fa451af-4cf9-404c-802e-9c5428145f32) successfully deleted.`
`[root@localhost ~]# nmcli connection show                                       NAME             UUID                                  TYPE      DEVICE`
`ens160           347b24b9-2e12-41c5-88eb-81b755be70ef  ethernet  ens160`

`[root@localhost ~]# systemctl restart NetworkManager`
`[root@localhost ~]# ip addr`
`1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000`
    `link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00`
    `inet 127.0.0.1/8 scope host lo`
       `valid_lft forever preferred_lft forever`
    `inet6 ::1/128 scope host`
       `valid_lft forever preferred_lft forever`
`2: ens160: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000`
    `link/ether 00:0c:29:ff:b3:09 brd ff:ff:ff:ff:ff:ff`
    `altname enp3s0`
    `inet 192.168.38.128/24 brd 192.168.38.255 scope global dynamic noprefixroute ens160`
       `valid_lft 1798sec preferred_lft 1798sec`
    `inet6 fe80::20c:29ff:feff:b309/64 scope link noprefixroute`
       `valid_lft forever preferred_lft forever`
`3: ens224: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000`
    `link/ether 00:0c:29:ff:b3:13 brd ff:ff:ff:ff:ff:ff`
    `altname enp19s0`

ens224의 ip가 삭제되었다.

구버전 - network
신버전 - NetworkManager
어느 버전부터는 NetworkManager와 network 혼용해서 사용한다.


### Network bonding 

NIC Team 이라고도 함
여러 개의 물리적 네트워크 인터페이스(ex. Ethernet card)를 하나의 논리적 인터페이스로 묶어 대역폭 확장, 부하 분산, 링크 장애 시 자동 장애 조치(failover) 제공
두 개 이상의 NIC를 하나로 묶어 사용, 안정적이고 빠르게 네트워크 연결을 만든다.

```
[root@localhost ~]# ip addr
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: ens160: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 00:0c:29:05:23:46 brd ff:ff:ff:ff:ff:ff
    altname enp3s0
    inet 192.168.38.128/24 brd 192.168.38.255 scope global dynamic noprefixroute ens160
       valid_lft 1791sec preferred_lft 1791sec
    inet6 fe80::20c:29ff:fe05:2346/64 scope link noprefixroute
       valid_lft forever preferred_lft forever
3: ens224: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 00:0c:29:05:23:50 brd ff:ff:ff:ff:ff:ff
    altname enp19s0
    inet 192.168.38.129/24 brd 192.168.38.255 scope global noprefixroute ens224
       valid_lft forever preferred_lft forever
    inet6 fe80::20c:29ff:fe05:2350/64 scope link
       valid_lft forever preferred_lft forever

```

ens160, ens224가 준비되어 있다.


### ==본딩 인터페이스 설정 파일==
```
[root@localhost ~]# vi /etc/sysconfig/network-scripts/ifcfg-bond0

DEVICE=bond0
NAME=bond0
TYPE=Bond
BONDING_MASTER=yes
BOOTPROTO=none
ONBOOT=yes
IPADDR=192.168.1.100
PREFIX=24
GATEWAY=192.168.1.1
DNS1=8.8.8.8
DNS2=8.8.4.4

BONDING_OPTS="mode=active-backup miimon=100"
```

본딩 인터페이스 설정 파일을 작성한다.

#### 본딩 모드 종류

##### mode 0 : Round-robin
* 첫번째부터 마지막까지 ==순차적==으로 NIC에 트래픽을 분산시켜 전송하는 모드
* LB, failover 제공
* 패킷 순서가 바뀔 수도 있다

##### **mode 1 : Active-backup** (best)
* 1개의 NIC만 활성화되며, 다른 NIC는 현 활성화된 NIC에서 장애가 발생했을 경우 활성화 됨
* 스위치 설정 필요 x
* active 슬레이브에 장애가 발생하면 backup 슬레이브가 자동으로 활성화

##### mode 2 : balance-xor 
* mode 0과 비슷하지만 xor연산을 이용해 목적지 Mac과 근원지 Mac을 이용하여 분배 => 두 값으로 해시값을 만들어서 플로우 타고 감
* LB 제공 -플로우 단위, 특정 ==플로우==가 집중되면 해당 인터페이스에 부하가 몰릴 수 있다
* XOR에 대한 계산 시간이 길어서 잘 사용하지 않는다.

##### mode 3 : broadcast
* 모든 NIC에 동일한 패킷을 broadcast로 발송함. 각 인터페이스는 동일한 데이터를 ==동시에== 받게 된다.
* 고가용성을 위해, 안정적
* LB 제공 x, 네트워크 대역폭 낭비, 효율성 떨어짐
* 아무리 좋은 환경이어도 트래픽이 제한되어 있기 때문에 잘 사용하지 않는다.

##### **mode 4 : LACP(802.3ad)** (best)
* LACP (Link Aggregation Control Protocol)
* 802.3ad를 지원하는 스위치가 필요
* 2개 이상의 네트워크 port를 묶어 더 큰 대역폭을 만드는 방법으로 NIC의 개수만큼 대역폭 확장 가능

##### mode 5 : balance-tlb
* [^1]스위치 지원이 필요 없으며, 로드 밸런싱 정책으로 밖으로 ==내보내지는 트래픽은 동적으로 분산되어 송출==되고 들어오는 트래픽은 active되어있는 NIC로 패킷(한쪽으로만) 받음
	* 가장 여유 있는 인터페이스를 통해 전송하므로 트래픽이 균형 있게 분산된다


##### mode 6 : balance-alb	
* mode 5와 같이 동작 
* 스위치 지원이 필요 없기 때문에 802**.3ad를 지원하지 않는 경우 사용한다.
* 데이터 수신 시에는 로드 밸런싱을 하는데 2개의 링크에서 ==ARP 협상==을 통해 동작함




**플로우(flow)**
네트워크 통신에서 서로 관련된 데이터 패킷들의 집합을 의미한다.
하나의 네트워크 연결이나 세션에 속한 패킷들을 의미한다.
- 출발지 IP 주소
- 출발지 포트 번호
- 목적지 IP 주소
- 목적지 포트 번호
- 사용 프로토콜 (예: TCP, UDP)
이 정보들을 조합(=>해시값)하여 하나의 플로우가 결정된다.
정보들은 본딩 모드와 해시 정책에 따라 다르게 설정될 수 있다.
같은 플로우에 속하는 패킷들은 같은 경로를 통해 처리된다.



**스위치 설정**
![[Pasted image 20250321102426.png]]
네트워크 스위치(물리적 또는 가상 네트워크 장비)에 대해 구성하는 모든 설정
* 포트 구성
* VLAN 설정
* 트렁크 구성
* 링크 집계(LACP)
* 스패닝 트리 프로토콜(STP)
* 보안 섲렁

**LACP(Link Aggregation Control Protocol)**
여러 개의 네트워크 링크(포트)를 하나의 집합으로 묶어 단일 링크처럼 동작하도록 하여, 총 대역폭을 늘리고, 하나의 링크에 장애가 발생했을 때 자동으로 다른 링크로 트래픽을 전환하는 표준 기술

* 묶는다?
	* 여러 개의 네트워크 포트(NIC)와 그에 연결된 케이블들을 논리적으로 하나의 큰 연결처럼 다루는 것
	* 본딩 설정을 통해 스위치와 서버가 이들을 하나의 통로로 인식하게 한다.

**802.3ad**
여러 개의 네트워크 연결을 하나로 합쳐서, 속도를 높이고 연결이 끊어졌을 때도 다른 연결로 자동 전환할 수 있도록 해주는 표준
-> 이를 ==LACP를 사용해서 구현==한다.

**ARP**
IP 주소를 MAC 주소로 변환
* Network 계층 - 3계층 - IP 주소
* Physical 계층 - 1계층 - 데이터를 '전기신호'로 바꾸어 전송하는 일 - MAC 주소
네트워크 계층에서는 IP를 사용하지만 실제 데이터 전송은 Physical 계층에서 일어나기 때문에 해당 IP에 대응하는 MAC주소로의 변환이 필요하다.

**ARP negotiation**
네트워크 본딩(mode 6 alb)에서 본딩 드라이버가 ARP 메시지를 조작해서 들어오는 트래픽을 특정 NIC로 분산시킨다.
 본딩 인터페이스가 외부 장비와 어떤 방식으로 ARP 메시지를 주고받아 어느 NIC가 수신할지를 결정하는 과정
 => **os - 네트워크 담당자 소통 원활**




### 슬레이브 설정 추가

```
MASTER=bond0
SLAVE=yes
```

ens160, ens224에 아래 두 줄을 추가한다.

master, slave 설정은 양쪽으로 하게 되면 트래픽이 꼬일 수 있기 때문에 bonding 설정과 각각 ens 설정을 잘 확인해줘야 한다.



ens160, ens220 설정에 이 두 옵션을 추가한다.

```
● NetworkManager.service - Network Manager
   Loaded: loaded (/usr/lib/systemd/system/NetworkManager.service; enabled; vendor pr>
   Active: active (running) since Wed 2025-03-12 21:45:21 KST; 27s ago
     Docs: man:NetworkManager(8)
 Main PID: 3113 (NetworkManager)
    Tasks: 3 (limit: 4479)
   Memory: 6.1M
   CGroup: /system.slice/NetworkManager.service
           └─3113 /usr/sbin/NetworkManager --no-daemon

Mar 12 21:45:21 localhost.localdomain NetworkManager[3113]: <info>  [1741783521.6113]>
Mar 12 21:45:21 localhost.localdomain NetworkManager[3113]: <info>  [1741783521.6600]>
Mar 12 21:45:21 localhost.localdomain NetworkManager[3113]: <info>  [1741783521.6612]>
Mar 12 21:45:23 localhost.localdomain NetworkManager[3113]: <info>  [1741783523.6922]>
Mar 12 21:45:23 localhost.localdomain NetworkManager[3113]: <info>  [1741783523.6981]>
Mar 12 21:45:23 localhost.localdomain NetworkManager[3113]: <info>  [1741783523.6984]>
Mar 12 21:45:23 localhost.localdomain NetworkManager[3113]: <info>  [1741783523.6991]>
Mar 12 21:45:23 localhost.localdomain NetworkManager[3113]: <info>  [1741783523.6998]>
Mar 12 21:45:23 localhost.localdomain NetworkManager[3113]: <info>  [1741783523.7007]>
Mar 12 21:45:27 localhost.localdomain NetworkManager[3113]: <info>  [1741783527.6126]>
~
```

본딩 인터페이스를 설정한다.

'>'가 있으면 로그가 생략되었다는 의미



```
[root@localhost ~]# ip addr show bond0
4: bond0: <NO-CARRIER,BROADCAST,MULTICAST,MASTER,UP> mtu 1500 qdisc noqueue state DOWN group default qlen 1000
    link/ether 6e:52:eb:84:c3:d7 brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.100/24 brd 192.168.1.255 scope global noprefixroute bond0
       valid_lft forever preferred_lft forever
```

[^1]: 스위치에 특별한 기능이 없어도 된다(예: LACP, 802.3ad) => mode1, mode4, 서버 내부에서만 동작, 스위치 관여 x * 오직 호스트에서만 동작한다

